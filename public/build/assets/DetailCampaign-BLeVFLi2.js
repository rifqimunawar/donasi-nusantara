import{r as o,j as e,y as j,a as u,d as p}from"./app-Bj7X75BL.js";import{N}from"./NavbarComponent-JQlIw16t.js";function f({campaign:s}){const[a,n]=o.useState(!1),t=()=>{n(!0)},i=()=>{n(!1)},c=`https://donasi-nusantara.my.id/campaign/${s.id}/detail`,l=`https://api.whatsapp.com/send?text=${encodeURIComponent(`${s.title} ${c}`)}`;return e.jsxs("div",{className:"fixed bottom-1 w-full container",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mx-auto max-w-screen-sm",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("button",{className:"btn btn-primary w-full",onClick:t,children:[e.jsx("i",{className:"bi bi-share"}),"Share"]})}),e.jsx("div",{className:"col-span-2",children:e.jsx("a",{href:`/create/${s.id}/donasi`,className:"btn btn-primary w-full",children:"Donasi Sekarang"})})]}),a&&e.jsx("div",{children:e.jsx("dialog",{id:"my_modal_1",className:"modal",open:!0,children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Bagikan Melalui"}),e.jsx("div",{className:"grid grid-cols-4",children:e.jsx("a",{href:l,children:e.jsxs("div",{className:"col-span-1 text-center w-20",children:[e.jsx("img",{src:"https://donasi-nusantara.my.id/img/wa.png",alt:"wa",className:"mx-auto"}),e.jsx("p",{className:"mx-auto",children:"WhatsApp"})]})})}),e.jsx("div",{className:"modal-action",children:e.jsx("button",{className:"btn",onClick:i,children:"Close"})})]})})})]})}function b({donatur:s}){const a=Number(s.nominal).toLocaleString("id-ID"),n=t=>{const i=new Date,c=new Date(t),l=Math.abs(i-c)/1e3,x={tahun:31536e3,bulan:2592e3,minggu:604800,hari:86400,jam:3600,menit:60,detik:1};for(let[d,r]of Object.entries(x)){const m=Math.floor(l/r);if(m>0)return`${m} ${d} yang lalu`}return"Baru saja"};return e.jsx("div",{className:"footerRaound border mb-2 rounded-2xl",children:e.jsx("div",{className:"mb-2 rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("div",{className:"col-span-1 flex justify-center items-center",children:e.jsx("img",{src:"https://kitabisa.com/_next/image?url=https%3A%2F%2Fassets.kitabisa.cc%2Fimages%2Ficons%2Ficon_anonymous-user.png&w=64&q=75"})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("p",{children:s.name}),e.jsxs("p",{className:"text-s",children:["berdonasi sebesar Rp: ",a," "]}),e.jsx("p",{className:"text-xs",children:n(s.created_at)})]})]})})})}function g({message:s}){const[a,n]=o.useState(Number(s.like)),[t,i]=o.useState(!1);o.useEffect(()=>{const l=localStorage.getItem(s.id)==="true";i(l)},[s.id]);const c=async l=>{l.preventDefault(),t||(await j.put(`/like/${s.id}`,{count:a+1}),n(a+1),localStorage.setItem(s.id,!0),i(!0))};return e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"footerRaound border mb-2 rounded-2xl p-3 col-span-3",children:[e.jsx("p",{className:"text-m",children:s.name}),e.jsx("p",{className:"text-xs text-wrap",children:s.message})]}),e.jsxs("button",{onClick:c,disabled:t,className:"footerRaound border mb-2 rounded-2xl p-3 flex justify-center items-center cursor-pointer",children:[t?e.jsx("i",{className:"bi bi-suit-heart-fill font-lg m-2"}):e.jsx("i",{className:"bi bi-suit-heart font-lg m-2"}),a]})]})}function y({campaign:s,donaturs:a,messDonaturs:n}){const[t,i]=o.useState(""),c=Number(s.price).toLocaleString("id-ID"),l=Number(s.collected).toLocaleString("id-ID"),x=a.length;return o.useEffect(()=>{(()=>{const r=s.collected,m=s.price,h=r/m*100;i(h)})()},[s]),e.jsx("section",{className:"my-0 mx-auto min-h-full max-w-screen-sm",children:e.jsxs("div",{className:"my-0 mx-auto min-h-screen max-w-480 overflow-x-hidden pb-[66px]",children:[e.jsx("div",{children:e.jsx(N,{})}),e.jsx(u,{title:"Detail"}),e.jsx("div",{className:"mt-5",children:e.jsx("img",{src:s.img,className:"w-full h-60 object-cover"})}),e.jsxs("div",{className:"m-5",children:[e.jsx("p",{className:"text-2xl text-wrap",children:s.title}),e.jsxs("p",{className:"text-xl",children:["Rp : ",c]}),e.jsxs("p",{children:["Sudah terkumpul Rp : ",l]}),e.jsx("progress",{className:"progress progress-info ",value:t,max:"100"})]}),e.jsxs("div",{className:"mt-4 ml-5 mr-5 grid grid-cols-2 gap-3 text-sm",children:[e.jsx("button",{className:"btn btn-primary",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-1.5 mt-1.5 flex items-center",children:[e.jsx("div",{className:"h-5 w-5",children:e.jsx("i",{className:"bi bi-suit-heart-fill"})})," ",e.jsxs("p",{children:[" ",x]})]}),e.jsx("p",{children:"Donasi"})]})}),e.jsx(p,{href:`/rincian/${s.id}`,className:"btn btn-primary",children:e.jsx("button",{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-1.5 mt-1.5 flex items-center",children:[e.jsx("div",{className:"h-5 w-5",children:e.jsx("i",{className:"bi bi-cash-coin"})})," ",e.jsx("p",{children:" "})]}),e.jsx("p",{children:"Rincian Dana"})]})})})]}),e.jsx("div",{className:"heading m-5 mt-7 text-xl",children:e.jsx("p",{children:"Kisah Penggalang Dana"})}),e.jsx("div",{className:"m-5 mt-7 text-l text-justify",children:e.jsx("p",{dangerouslySetInnerHTML:{__html:s.description}})}),e.jsxs("div",{className:"m-5 mt-7 ",children:[e.jsx("p",{className:"text-xl mb-3",children:"Para Donatur"}),a.slice(0,10).map((d,r)=>e.jsx(b,{donatur:d},r))]}),e.jsxs("div",{className:"m-5 mt-7 ",children:[e.jsx("p",{className:"text-xl mb-3",children:"Do'a dan pesan"}),n.map((d,r)=>e.jsx(g,{message:d},r))]}),e.jsx("div",{className:"btm-center",children:e.jsx(f,{campaign:s})})]})})}export{y as default};
